<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <title>说一说CSS里面的数值单位</title>
  
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="page">
  <header class="header">
  <a class="home nav" href="https://codertx.github.io">home.</a>
  
</header>
  <div class="container">
    <section class="main"><section class="article-entry">
  <div class="date">May 3rd, 2016</div>
  <h1 class="article-title">说一说CSS里面的数值单位</h1>
  <article class="article">
  <h2 id="css单位"><a href="#css单位" class="headerlink" title="css单位"></a>css单位</h2><p>css单位分为绝对单位(absolute units)和相对单位(relative units)。绝对单位就是不受其他数值的影响，在任何地方使用相同的值都会出现相同的效果。而相对单位就是会受其他元素影响，在不同的地方使用相同的值可能效果也会不同。看下下面这个表</p>
<table>
<thead>
<tr>
<th style="text-align:center">单位</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">px</td>
<td style="text-align:center">绝对单位</td>
<td style="text-align:center">像素</td>
</tr>
<tr>
<td style="text-align:center">mm</td>
<td style="text-align:center">绝对单位</td>
<td style="text-align:center">毫米</td>
</tr>
<tr>
<td style="text-align:center">cm</td>
<td style="text-align:center">绝对单位</td>
<td style="text-align:center">厘米</td>
</tr>
<tr>
<td style="text-align:center">in</td>
<td style="text-align:center">绝对单位</td>
<td style="text-align:center">英寸</td>
</tr>
<tr>
<td style="text-align:center">pt</td>
<td style="text-align:center">绝对单位</td>
<td style="text-align:center">1英寸的72分之1</td>
</tr>
<tr>
<td style="text-align:center">pc</td>
<td style="text-align:center">绝对单位</td>
<td style="text-align:center">1英寸的6分之1</td>
</tr>
<tr>
<td style="text-align:center">em</td>
<td style="text-align:center">相对单位</td>
<td style="text-align:center">当前元素字体大小的倍数</td>
</tr>
<tr>
<td style="text-align:center">ex</td>
<td style="text-align:center">相对单位</td>
<td style="text-align:center">小写字母x的高度的倍数</td>
</tr>
<tr>
<td style="text-align:center">ch</td>
<td style="text-align:center">相对单位</td>
<td style="text-align:center">数字0的宽度的整倍数</td>
</tr>
<tr>
<td style="text-align:center">rem</td>
<td style="text-align:center">相对单位</td>
<td style="text-align:center">根元素(html)字体大小的倍数</td>
</tr>
<tr>
<td style="text-align:center">vw</td>
<td style="text-align:center">相对单位</td>
<td style="text-align:center">可视窗口宽度的1/100</td>
</tr>
<tr>
<td style="text-align:center">vh</td>
<td style="text-align:center">相对单位</td>
<td style="text-align:center">可视窗口高度的1/100</td>
</tr>
</tbody>
</table>
<p>需要注意的是，<code>1in</code>的长度最后在显示器上的效果不一定真的是1英寸，在一些高分辨的设备上可能会比较精确（比如激光打印机），但在一些低分辨率上就不一定这样精确了。css对此明确没有要求。</p>
<p><code>pt</code>和<code>pc</code>这两个单位是从印刷技术那里继承下来的，打印机经常使用这两个或者类似的单位。在css里面已经没有理由使用这两个单位了。不过当你的样式是用来准备打印的，需要精确控制打印内容尺寸的大小的时候，也请使用<code>pt</code>、<code>cm</code>这些单位。</p>
<h3 id="单位换算"><a href="#单位换算" class="headerlink" title="单位换算"></a>单位换算</h3><p><code>px</code>和<code>mm</code>、<code>cm</code>等现实中的单位是没有绝对大小关系的。但是这些现实中的单位是可以互相转换的，关系如下：</p>
<pre><code>1in = 2.54cm = 25.4mm = 72pt = 6pc
</code></pre><p>不过实际我们也很少用到这些单位。</p>
<h2 id="关于em"><a href="#关于em" class="headerlink" title="关于em"></a>关于em</h2><p>em 这个单位最常见的错误就是会认为是以父元素的字体大小为基准。但实际上它是相对于当前元素的字体大小来计算的，我们之所以会错误的以为em是相对于父元素字体的大小，完全是因为<code>font-size</code>的继承效果。下面我们来演示一下吧。</p>
<h3 id="em单位如何转换成具体值的"><a href="#em单位如何转换成具体值的" class="headerlink" title="em单位如何转换成具体值的"></a>em单位如何转换成具体值的</h3><iframe scrolling="no" width="100%" height="250" src="//jsfiddle.net/Lmc13dmn/embedded/js,resources,html,css,result/dark" frameborder="0" allowfullscreen></iframe>
<p>上面的 child 的实际大小是 <code>30px</code>，是如何计算出来的呢？这里<code>.parent</code>的大小是<code>16px</code>，因此<code>.wrap</code>元素由于继承，它原本的大小是<code>16px</code>，由于它设置<code>font-size: 1.5em</code>，所以它的最终大小是 <code>16 * 1.5 = 24px</code>。<code>.child</code>因此继承到的大小是<code>24px</code>，由于它设置<code>font-size: 1.25em</code>，所以它的最终大小是 <code>24 * 1.25 = 30px</code>。所以除非你通过绝对大小单位比如<code>px</code>、<code>vw</code>等重新设置了字体大小，否则<code>em</code>的倍数是会一层一层的累积的。我们再来看另外一个例子：</p>
<iframe scrolling="no" width="100%" height="250" src="//jsfiddle.net/5nrLtgzt/embedded/js,resources,html,css,result/dark" frameborder="0" allowfullscreen></iframe>
<p>这里我们计算了 <code>padding</code> 的大小，这里能提现出 <code>em</code> 是以当前元素的 <code>font-size</code> 为参考的，这里 <code>.child</code> 的 <code>font-size</code> 计算后的结果由上面可知是 <code>30px</code>。然后计算 <code>padding</code> 的时候就是 <code>30 * 1.25 = 37.5px</code>。</p>
<p>由上面我们可以知道，<code>em</code>为单位的最终大小会受到每一个祖先元素的影响（如果中间某一祖先元素使用了<code>px</code>、<code>vw</code>等绝对大小的单位，则之前的祖先元素的影响就能忽略，<code>em</code>的计算会重新从这里开始），所以在使用 <code>em</code> 的时候一定要格外清楚祖先元素的设置情况。</p>
<h2 id="rem和em该如何选择？"><a href="#rem和em该如何选择？" class="headerlink" title="rem和em该如何选择？"></a>rem和em该如何选择？</h2><p><code>em</code>可以在一个特定的区域里面使用，比如说导航栏，通过把边界宽度设置为<code>em</code>单位使得调整字体的时候能够保证视觉上能够等比缩放。因为视觉上是参考一个较小区域内的元素，所以即使祖先元素会影响其大小，但是在实际设计的时候并不会干扰。</p>
<p>使用rem能够确保整个网站的整体布局。如果没有显示地设置<code>html</code>元素的字体大小，那么将会使用浏览器设置的字体大小作为<code>html</code>元素的字体大小。不建议显示地将<code>html</code>的文字大小设置为绝对的值，因为用户就无法改变网页字体的大小。而且，如果你真的需要改变<code>html</code>字体大小，最好使用<code>em</code>，这样用户也能自己改变网页大小。<br>有些用户的习惯于看大号的字体，或者说小字体看不清（比如我妈）。所以保证网页字体可以由用户调整是非常重要的。然后网页中尽量使用<code>rem</code>单位来设置每一个地方的尺寸。在使用媒体查询的时候，也使用<code>rem</code>为单位，让布局跟随字体大小改变而不是像素大小改变。</p>
<h2 id="vh和vw"><a href="#vh和vw" class="headerlink" title="vh和vw"></a>vh和vw</h2><p>在很多地方，我们经常需要元素的大小随着浏览器窗口大小调整。我们平常会使用百分比这个单位。但是问题在于，百分比这个单位是相对于父元素的大小来设置的。对于块级元素来说，如果不设置宽度，默认就是占满父元素的空间，这没什么大问题。但是高度就不同了，如果你没有设置高度，那么默认是根据内容多少来确定的。所以当你需要高度随着浏览器窗口的高度变化时，问题就有点棘手了，要么你用JS获取当前浏览器的高度，然后通过绝对大小来更改，要么就一层一层地给每一个元素设置 <code>height: 100%;</code> 来保证最终的那个元素得到高度参考是浏览器窗口的高度。现在有了<code>vh</code>这个单位，就不再需要考虑父级元素的 <code>height</code> 值，也不需要自己去获取浏览器高度。<br>我认为这两个单位实用价值还是挺高的，在写css的时候，经常会被高度和宽度这两个样式弄得很头痛。要保证界面有一定自适应效果，就不能用 <code>px</code>，用百分比又得确保父元素的高度和宽度是正确的。所以用好 <code>vw</code> 和 <code>vh</code> 能保证样式效果还不用考虑其他问题。</p>
<h2 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h2><p> <a href="https://www.w3.org/Style/Examples/007/units.en.html#font-size" target="_blank" rel="external">CSS: em, px, pt, cm, in…</a><br> <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Values_and_units" target="_blank" rel="external">CSS values and units</a><br> <a href="https://webdesign.tutsplus.com/zh-hans/tutorials/comprehensive-guide-when-to-use-em-vs-rem--cms-23984" target="_blank" rel="external">综合指南: 何时使用 Em 与 Rem</a></p>

  </article>
</section></section>
  </div>
  <footer class="footer">
  <span class="text">Powered by </span>
  <a href="https://hexo.io/" target="_blank">Hexo</a>
  <span> & Theme by</span>
  <a href="https://github.com/codertx/hexo-theme-lightit" target="_blank">lightit</a>
</footer>
</body>
<script>
  (function(){
    var dotCount = 20
    var dots = []
    var dotBaseSpeed = 0.5
    var canvas = document.createElement('canvas')
    var ctx = canvas.getContext('2d')
    var cHeight = window.innerHeight
    var cWidth = window.innerWidth
    var bgColor = '#FAFAFA'
    var dotColor = '#EEE'
    var dotBaseRadius = 6
    var maxLineLength = cWidth > cHeight ? cWidth * 0.28 : cHeight * 0.28
    var requestAnimationFrame

    function initRequestAnimationFrame() {
      var vendor = ['', 'ms', 'moz', 'webkit', 'o']

      for (var i = 0; i < vendor.length && !window.requestAnimationFrame; i++) {
        window.requestAnimationFrame = window[vendor[i] + 'RequestAnimationFrame']
      }

      requestAnimationFrame = window.requestAnimationFrame

      return typeof requestAnimationFrame === 'function' ? true : false
    }    

    function initCanvas() {
      var canvasStyle = {
        top: 0,
        left: 0,
        position: 'fixed',
        zIndex: -1
      }

      for (var pro in canvasStyle) {
        canvas.style[pro] = canvasStyle[pro]
      }

      canvas.width = cWidth
      canvas.height = cHeight

      document.body.appendChild(canvas)
    }

    function initDots() {
      for (var i = 0; i < dotCount; i++) {
        dots.push(newDot())
      }
    }

    function init() {
      if (!initRequestAnimationFrame()) return
      initCanvas()
      initDots()
      drawDots()
    }

    function newDot() {
      return {
        x: random(0, cWidth),
        y: random(0, cHeight),
        radius: random(dotBaseRadius * 0.5, dotBaseRadius),
        xSpeed: randomPN() * random(dotBaseSpeed * 0.5, dotBaseSpeed),
        ySpeed: randomPN() * random(dotBaseSpeed * 0.5, dotBaseSpeed)
      }
    }

    function moveDots() {
      for (var i = 0; i < dotCount; i++) {
        var speedX = (dots[i].x + dots[i].xSpeed) % cWidth 
        var speedY = (dots[i].y + dots[i].ySpeed) % cHeight
        dots[i].x = speedX >= 0 ? speedX : speedX + cWidth
        dots[i].y = speedY >= 0 ? speedY : speedY + cHeight
      }
    }

    function drawDots() {
      ctx.fillStyle = bgColor
      ctx.fillRect(0, 0, cWidth, cHeight)

      for (var i = 0; i < dotCount; i++) {
        ctx.beginPath()
        ctx.arc(dots[i].x, dots[i].y, dots[i].radius, 0, 2 * Math.PI, false)
        ctx.fillStyle = dotColor
        ctx.fill()

        for (var j = i + 1; j < dotCount; j++) {
          if (Math.sqrt(Math.pow(dots[i].x - dots[j].x, 2) + Math.pow(dots[i].y - dots[j].y, 2)) < maxLineLength) {
            ctx.beginPath()
            ctx.strokeStyle = dotColor
            ctx.moveTo(dots[i].x, dots[i].y)
            ctx.lineTo(dots[j].x, dots[j].y)
            ctx.stroke()
          }
        }
      }
  
      moveDots()
      requestAnimationFrame(drawDots)
    }

    function random(min, max) {
      return Math.random() * (max - min) + min
    }

    function randomPN() {
      return Math.random() > 0.5 ? 1 : -1
    }

    window.addEventListener('DOMContentLoaded', init,false)
  }())
</script>